<html>
<head>
    <title>userSchema.methods.generateJwt = function()</title>
    <link rel="stylesheet" charset="UTF-8" href="https://d2bb1mtyn3kglb.cloudfront.net/lib/highlight/styles/docco.min.css">
    <script charset="UTF-8" type="application/javascript" src="https://d2bb1mtyn3kglb.cloudfront.net/lib/highlight/highlight.min.js"></script>
</head>
<body style="font-family: 'DejaVu Sans', Arial, Helvetica, sans-serif">
<h3 style="margin-bottom: 0">userSchema.methods.generateJwt = function()</h3>
<p style="margin-top: 4px">in <i>models/User.js [239:263]</i></p>
<ul>
    <li><b>23</b> lines of code</li>
    <li><b>1</b> McCabe index (conditional complexity)</li>
</ul>
<pre>
<code class="js">
    userSchema.methods.generateJwt = function() {
        var expiry = new Date();
        expiry.setDate(expiry.getDate() + 7);
    
        return jwt.sign({
          _id: this._id,
          email: this.email,
          name: this.name,
          tel: this.tel,
          // relation_id: this.relation_id,
          nameEntreprise: this.nameEntreprise,
          ville: this.ville,
          societe: this.societe,
          quartier: this.quartier,
          nb_commande: this.nb_commande,
          type: this.type,
     types: this.types,
     date_debut: this.date_debut,
          date_fin: this.date_fin,
  roles: this.roles,        
    role: this.role,
          valider: this.valider,
          exp: parseInt(expiry.getTime() / 1000),
        }, &quot;MY_SECRET&quot;); // DO NOT KEEP YOUR SECRET IN THE CODE!
      };

</code>
</pre>
<script>
    hljs.initHighlightingOnLoad();
</script>
</body>
